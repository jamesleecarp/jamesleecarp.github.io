<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<head>
	<title>CFB Roster Mapper</title>
<script type="text/javascript">
	function getval(record, field) {
		if (record.getElementsByTagName(field)[0].firstChild != null) {
			return record.getElementsByTagName(field)[0].firstChild.nodeValue;
		}
		else {
			return "?";
		}
	}
	
	function getIconDimensions(team) {
		//image width, image height, shadow width, shadow height
		var dimensions = [];
		dimensions["356"] = [30,36,45,36];
		dimensions["84"] = [30,36,45,36];
		dimensions["2294"] = [30,26,45,26];
		dimensions["194"] = [30,32,45,32];
		dimensions["130"] = [30,27,45,27];
		dimensions["127"] = [30,35,45,35];
		dimensions["135"] = [34,33,45,33];
		dimensions["77"] = [30,36,45,36];
		dimensions["213"] = [30,27,45,27];
		dimensions["2509"] = [29,32,45,32];
		dimensions["275"] = [30,30,45,30];
		dimensions["2633"] = [30,34,45,34];
		return dimensions[team];
	}
</script>
</head>

<body onunload="GUnload()">
<table>
	<tr>
		<td align="center">
			<table>
				<tr>
					<td>
						<div id="header_left"></div>
					</td>
					<td align=center>
						<div id="header_center">
							<font size=+3>CFB Roster Mapper</font>
							<form name="myform" id="myform" action="cfb_rosters.html" method="post">
							Select a team to see the hometowns of its players:<br />
							<select name="team" id="team" size="1" onchange="load(window.document.myform.team.options[selectedIndex].value)">
								<option value=356>Illinois
								<option value=84>Indiana
								<option value=2294>Iowa
								<option value=194>Ohio State
								<option value=130>Michigan
								<option value=127>Michigan State
								<option value=135>Minnesota
								<option value=77>Northwestern
								<option value=213 selected>Penn State
								<option value=2509>Purdue
								<option value=275>Wisconsin
								<option value=2633>Tennessee
							</select>
							</form>
						</div>				
					</td>
					<td>
						<div id="header_right"></div>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td>
			<table>
				<tr>
					<td>
						<div id="sidebar" style="width: 324px; height: 600px; overflow: auto;"></div>
					</td>
					<td>
						<div id="map" style="width: 700px; height: 600px; border: 3px solid #979797"></div>
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>

<p>
<sup>*</sup> - unable to map this player
</p>
<div id="preload"></div>

<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAJ2sBn1jrgoYnoI0XybD7rhQl-wWlt45m5Y4O6dBhIxHzH9rdphQD8o14bCqYJeLt-YbcMweKPH1q2w"
	type="text/javascript"></script>
<script type="text/javascript">
if (GBrowserIsCompatible()) {
	var sidehtml = "";
	var gmarkers = [];
	var htmls = [];
	var i = 0;

	var map;
	map = new GMap2(document.getElementById("map"));
	
	map.addControl(new GLargeMapControl());
	map.addControl(new GMapTypeControl());

	function createmarker(point, icon, text) {
		var marker = new GMarker(point, icon);
       	GEvent.addListener(marker, "click", function() {
           	marker.openInfoWindowHtml(text);
         });
		gmarkers[i] = marker;
		htmls[i] = text;
		i++;
		return marker;
	}

	function myclick(i) {
		gmarkers[i].openInfoWindowHtml(htmls[i]);
	}
	
	function load(team) {
        map.getInfoWindow().hide();
        
        map.clearOverlays();
        
        // empty the array
        gmarkers = [];
		htmls = [];
        // reset the side_bar
        sidehtml="";
		i = 0;

		map.setCenter(new GLatLng(39, -96), 4);
		
		document.getElementById("preload").innerHTML = "<img src='" + team + ".png' style='display:none'>";
		document.getElementById("header_left").innerHTML = "<html><img src='http://espn.go.com/i/teamlogos/ncaa/lrg/trans/" + team + ".gif'></html>";
		document.getElementById("header_right").innerHTML = "<html><img src='http://espn.go.com/i/teamlogos/ncaa/lrg/trans/" + team + ".gif'></html>";
			
		var sidehtml = "<table border=1 cellpadding=5>"
			+ "<thead>"
			+ "<tr bgcolor=#e0e0e0>"
			+ "<td><b>#</b></td>"
			+ "<td><b>Name</b></td>"
			+ "<td><b>Hometown</b></td>"
			+ "</tr>"
			+ "</thead>"
			+ "<tbody>";
		
		var icon = new GIcon();

		var dimensions = getIconDimensions(team);
		icon.image = "icons/" + team + ".png";
		icon.shadow = "icons/" + team + "_s.png";
		icon.iconSize = new GSize(dimensions[0],dimensions[1]);
		icon.iconAnchor = new GPoint(dimensions[0]/2,dimensions[1]);
		icon.shadowsize = new GSize(dimensions[2],dimensions[3]);
		icon.infoWindowAnchor = new GPoint(dimensions[0]/2,1);
		icon.transparent = "icons/" + team + "_t.png";
		icon.printImage = "icons/" + team + ".gif";
		
		
	    var request = GXmlHttp.create();
	    request.open("GET", team + ".xml", true);
	    request.onreadystatechange = function() {
			if (request.readyState == 4) {
		  		var xmlDoc = request.responseXML;
				  // obtain the array of markers and loop through it
			    var records = xmlDoc.documentElement.getElementsByTagName("player");
			    
				for (var i = 0; i < records.length; i++) {
					var player = records[i];
					var name = getval(player,"name");
					var num = getval(player,"number");
					var pos = getval(player,"position");
					
					if (getval(player,"town")!="?")
					{
						var hometown = getval(player,"town") + ", " + getval(player,"state");
					}
					else
					{
						var hometown = "?";
					}
					
					var cls = getval(player,"class");
					
					var lat = parseFloat(getval(player,"lat"));
					var lng = parseFloat(getval(player,"long"));
					
					var point = new GLatLng(lat,lng);
						
					sidehtml = sidehtml + "<tr><td>" + num + "</td>"
						+ "<td>" + name + "</td>";
											
					if (point.lat()!=0)
					{
						sidehtml = sidehtml + "<td><a href='javascript: myclick(" 
							+ i + ")' "	+ "style='text-decoration: none'>" + hometown + "</a></td></tr>";
	
						var winhtml = "<font size=+2>" + name + "</font><br />"
							+ "#" + num + "<br />"
							+ pos + "<br />"
							+ hometown + "<br />"
							+ cls;
						
						map.addOverlay(createmarker(point,icon,winhtml));
					}
					else
					{
						createmarker(point,icon,"");
						sidehtml = sidehtml + "<td>" + hometown + "<sup>*</sup></td></tr>";
					}
				}

		//document.getElementById("sidebar").innerHTML = sidehtml;
		//document.getElementById("header_left").innerHTML = "<html><img src='http://espn.go.com/i/teamlogos/ncaa/lrg/trans/" + team + ".gif'></html>";
		//document.getElementById("header_right").innerHTML = "<html><img src='http://espn.go.com/i/teamlogos/ncaa/lrg/trans/" + team + ".gif'></html>";
				sidehtml = sidehtml + "</tbody></table>";
				document.getElementById("sidebar").innerHTML = sidehtml;
			}
		}
		request.send(null);
	}
	
	load(213);
}

function zoomto(lt, lng) {
	//var map = document.getElementById("map");
	map.setCenter(new GLatLng(lt, lng), 9);
}
</script>

</body>
</html>
